<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>socket test</title>
<style>
  * { padding: 0; margin: 0; }
  canvas { background: #eee; display: block; margin: 0 auto; }
</style>
</head>
<body>
<textarea id="debug" rows="20" cols="120"></textarea>
<script src="../chansock.js"></script>
<script>
  function log(s){
    document.getElementById('debug').value += JSON.stringify(s) + "\n";
    console.log(s);
  }

  var sock = createChannelSocket();

  function chanHandler(d,f,c){ log({channel: c, from: f, data: d}) }

  sock.onopen = function(){
    log('connected');
    sock.on('move',       chanHandler);
    sock.on('message',    chanHandler);
    sock.on('connect',    chanHandler);
    sock.on('disconnect', chanHandler);
    sock.on('server',     chanHandler);
  };
  sock.onclose = function(){ log('disconnected') };
</script>
</body>
</html>
